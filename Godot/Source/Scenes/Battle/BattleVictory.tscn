[gd_scene load_steps=16 format=3 uid="uid://udu41fk3ega5"]

[ext_resource type="Script" path="res://Source/Scenes/Battle/BattleVictory.cs" id="1_xe3mj"]
[ext_resource type="Script" path="res://addons/BasePanelPlugin/BasePanel.cs" id="2_nyqk7"]
[ext_resource type="Texture2D" uid="uid://c23nfsjgg2nop" path="res://Assets/Graphics/Sprites/Actors/Portraits/AFABPortrait1.png" id="3_77pkm"]
[ext_resource type="Texture2D" uid="uid://4fu8k5l8ve1a" path="res://Assets/Graphics/Interface/Buttons/ActionRemapButton/Normal.png" id="3_ji255"]
[ext_resource type="PackedScene" uid="uid://cgdolyn63ljtp" path="res://Source/Scenes/Battle/PnlScales.tscn" id="3_r2gv2"]
[ext_resource type="Texture2D" uid="uid://c1csktoq8iakb" path="res://Assets/Graphics/Interface/Buttons/ActionRemapButton/Pressed.png" id="4_5yl26"]
[ext_resource type="Texture2D" uid="uid://c3r6mo1ik7w3n" path="res://Assets/Graphics/Interface/Buttons/ActionRemapButton/Hover.png" id="5_tpefe"]
[ext_resource type="Texture2D" uid="uid://y6lvsy2sm8rf" path="res://Assets/Graphics/Interface/Buttons/ActionRemapButton/Disabled.png" id="6_l1aks"]
[ext_resource type="Script" path="res://addons/BaseTextureButtonPlugin/BaseTextureButton.cs" id="7_cm0lb"]

[sub_resource type="LabelSettings" id="LabelSettings_i2ruh"]
font_size = 64

[sub_resource type="LabelSettings" id="LabelSettings_o6e5d"]
font_size = 64

[sub_resource type="LabelSettings" id="LabelSettings_yeogo"]
font_size = 48

[sub_resource type="Animation" id="Animation_j2qvj"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("VBoxContainer/LblDiplomacyOutcome:visible_ratio")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("BtnDiplomacyContinue:visible")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}

[sub_resource type="Animation" id="Animation_x2yqf"]
resource_name = "Start"
length = 8.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("VBoxContainer/LblDiplomacyOutcome:visible_ratio")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 8),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [0.0, 1.0]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("BtnDiplomacyContinue:visible")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 8),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [false, true]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_fl5or"]
_data = {
"RESET": SubResource("Animation_j2qvj"),
"Start": SubResource("Animation_x2yqf")
}

[node name="BattleVictory" type="Control" node_paths=PackedStringArray("_btnMercy", "_btnDiplomacy", "_btnWrath", "_pnlDiplomacy", "_pnlFate", "_btnDiplomacyContinue", "_animDiplomacy", "_animScalesStart", "_animScales", "_lblDiplomacyOutcome", "_opponentTex", "_lblDecideFate")]
process_mode = 3
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("1_xe3mj")
_btnMercy = NodePath("PnlFate/VBoxContainer/HBoxContainer/BtnMercy")
_btnDiplomacy = NodePath("PnlFate/VBoxContainer/HBoxContainer/BtnDiplomacy")
_btnWrath = NodePath("PnlFate/VBoxContainer/HBoxContainer/BtnWrath")
_pnlDiplomacy = NodePath("PnlDiplomacy")
_pnlFate = NodePath("PnlFate")
_btnDiplomacyContinue = NodePath("PnlDiplomacy/BtnDiplomacyContinue")
_animDiplomacy = NodePath("PnlDiplomacy/VBoxContainer/LblDiplomacyOutcome/Anim")
_animScalesStart = NodePath("PnlFate/VBoxContainer/HBoxContainer2/PnlScales/AnimScalesStart")
_animScales = NodePath("PnlFate/VBoxContainer/HBoxContainer2/PnlScales/AnimScales")
_lblDiplomacyOutcome = NodePath("PnlDiplomacy/VBoxContainer/LblDiplomacyOutcome")
_opponentTex = NodePath("PnlFate/VBoxContainer/HBoxContainer2/OpponentTex")
_lblDecideFate = NodePath("PnlFate/VBoxContainer/LblDecideFate")

[node name="PnlFate" type="Panel" parent="."]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.3
anchor_top = 0.2
anchor_right = 0.7
anchor_bottom = 0.8
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("2_nyqk7")
_snapToEdges = false
_draggable = false
_bringToFrontOnClick = false
_takeFocus = false

[node name="VBoxContainer" type="VBoxContainer" parent="PnlFate"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/separation = 20

[node name="LblDecideFate" type="Label" parent="PnlFate/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3
size_flags_stretch_ratio = 0.5
text = "Decide the fate of your opponents!"
label_settings = SubResource("LabelSettings_i2ruh")
horizontal_alignment = 1
vertical_alignment = 1
autowrap_mode = 3

[node name="HBoxContainer2" type="HBoxContainer" parent="PnlFate/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3

[node name="OpponentTex" type="TextureRect" parent="PnlFate/VBoxContainer/HBoxContainer2"]
layout_mode = 2
size_flags_horizontal = 3
texture = ExtResource("3_77pkm")
expand_mode = 3
stretch_mode = 5

[node name="PnlScales" parent="PnlFate/VBoxContainer/HBoxContainer2" instance=ExtResource("3_r2gv2")]
layout_mode = 2
size_flags_vertical = 3
size_flags_stretch_ratio = 1.0

[node name="HBoxContainer" type="HBoxContainer" parent="PnlFate/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3
size_flags_stretch_ratio = 0.5

[node name="BtnMercy" type="TextureButton" parent="PnlFate/VBoxContainer/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
texture_normal = ExtResource("3_ji255")
texture_pressed = ExtResource("4_5yl26")
texture_hover = ExtResource("5_tpefe")
texture_disabled = ExtResource("6_l1aks")
ignore_texture_size = true
stretch_mode = 0
script = ExtResource("7_cm0lb")

[node name="Label" type="Label" parent="PnlFate/VBoxContainer/HBoxContainer/BtnMercy"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
text = "Mercy"
label_settings = SubResource("LabelSettings_o6e5d")
horizontal_alignment = 1
vertical_alignment = 1

[node name="BtnDiplomacy" type="TextureButton" parent="PnlFate/VBoxContainer/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
texture_normal = ExtResource("3_ji255")
texture_pressed = ExtResource("4_5yl26")
texture_hover = ExtResource("5_tpefe")
texture_disabled = ExtResource("6_l1aks")
ignore_texture_size = true
stretch_mode = 0
script = ExtResource("7_cm0lb")

[node name="Label" type="Label" parent="PnlFate/VBoxContainer/HBoxContainer/BtnDiplomacy"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
text = "Diplomacy"
label_settings = SubResource("LabelSettings_o6e5d")
horizontal_alignment = 1
vertical_alignment = 1

[node name="BtnWrath" type="TextureButton" parent="PnlFate/VBoxContainer/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
texture_normal = ExtResource("3_ji255")
texture_pressed = ExtResource("4_5yl26")
texture_hover = ExtResource("5_tpefe")
texture_disabled = ExtResource("6_l1aks")
ignore_texture_size = true
stretch_mode = 0
script = ExtResource("7_cm0lb")

[node name="Label" type="Label" parent="PnlFate/VBoxContainer/HBoxContainer/BtnWrath"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
text = "Wrath"
label_settings = SubResource("LabelSettings_o6e5d")
horizontal_alignment = 1
vertical_alignment = 1

[node name="PnlDiplomacy" type="Panel" parent="."]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.2
anchor_top = 0.2
anchor_right = 0.8
anchor_bottom = 0.8
script = ExtResource("2_nyqk7")
_snapToEdges = false
_draggable = false
_bringToFrontOnClick = false
_takeFocus = false
_startClosed = true

[node name="VBoxContainer" type="VBoxContainer" parent="PnlDiplomacy"]
layout_mode = 1
anchors_preset = -1
anchor_right = 1.0
anchor_bottom = 0.8
grow_horizontal = 2
grow_vertical = 2

[node name="LblDiplomacyOutcome" type="Label" parent="PnlDiplomacy/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3
text = "You roll a + b vs your captive's c + d.

then either:
Your charisma has swayed your opponent. You have a new companion. By defying the Gods, the balance has shifted towards neutrality.
or:
Your opponent rejects your attempts at persuasion. You must decide on mercy or execution. The Gods are watching.
"
label_settings = SubResource("LabelSettings_yeogo")
horizontal_alignment = 1
vertical_alignment = 1
autowrap_mode = 2
visible_characters = 0
visible_ratio = 0.0

[node name="Anim" type="AnimationPlayer" parent="PnlDiplomacy/VBoxContainer/LblDiplomacyOutcome"]
root_node = NodePath("../../..")
libraries = {
"": SubResource("AnimationLibrary_fl5or")
}

[node name="BtnDiplomacyContinue" type="TextureButton" parent="PnlDiplomacy"]
visible = false
layout_mode = 1
anchors_preset = -1
anchor_left = 0.3
anchor_top = 0.8
anchor_right = 0.7
anchor_bottom = 0.95
size_flags_horizontal = 3
texture_normal = ExtResource("3_ji255")
texture_pressed = ExtResource("4_5yl26")
texture_hover = ExtResource("5_tpefe")
texture_disabled = ExtResource("6_l1aks")
ignore_texture_size = true
stretch_mode = 0
script = ExtResource("7_cm0lb")

[node name="Label" type="Label" parent="PnlDiplomacy/BtnDiplomacyContinue"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
text = "Continue"
label_settings = SubResource("LabelSettings_o6e5d")
horizontal_alignment = 1
vertical_alignment = 1

[editable path="PnlFate/VBoxContainer/HBoxContainer2/PnlScales"]
